<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Valdaris</title>
  <link rel="stylesheet" href="../stylesheet.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <style>
    .notes textarea {
      width: 100%;
      height: 250px;
      background-color: #1A1A1D;
      color: #E0D8B0;
      border: 1px solid #3A3A3F;
      border-radius: 5px;
      padding: 15px;
      font-family: 'Merriweather', serif;
      font-size: 1em;
      resize: vertical;
    }

  </style>
</head>
<body>
  <header>
    <h1>The Ardent Empire</h1>
    <nav>
      <ul>
        <li><a href="../index.html">Home</a></li>
        <li><a href="../players.html">Player Characters</a></li>
        <li><a href="../cities.html">Locations</a></li>
        <li><a href="../map/map.html">Map</a></li>
        <li><a href="../travel-calculator.html">Travel calc</a></li>
        <li><a href="../timeline.html">Timeline</a></li>
      </ul>
    </nav>
  </header>

  <div class="city-banner">
    <h1>Valdaris</h1>
    <p><em>The Obsidian Crown</em></p>
  </div>

  <div class="city-content">
    <div class="section">
      <h2>Lore</h2>
      <p>Valdaris, the capital of the Secia Kingdom, is the smallest of the four imperial capitals but holds immense importance and gravitas. Its nickname, "The Obsidian Crown," stems from the black stone used to pave its streets and build its imposing central throne.</p>
      
      <p><strong>History & Governance:</strong> The city was originally founded by The Hero of Man- Jorvik in the year 26 ANC. It is currently governed by 2nd in line, <strong>Julius Ardent</strong>, who wields absolute power. Julius took over governance after Jorvik departed on a critical quest to deal with the "The Verdant Horror," and in its founders absence, the city has grown into one of the 4 capital cities.</p>
      
      <p><strong>Geography & Economy:</strong> Located in the northernmost area of the kingdom within the <strong>White Lion Woods</strong>, Valdaris is not a coastal city, but sits about a hundred miles inland. Its economy runs almost entirely on port trade from its coastal port, connected to the city by the vital <strong>Port Road</strong>. This position makes it the easiest and most vital point for getting sea goods inland to the rest of the kingdom.</p>
      
      <p><strong>Culture & Factions:</strong> Valdaris presents a stark contrast: it is the least fortified of the four capitals, but it is by far the most religious. The city is respected and revered on behalf of its founder, Jorvik. While Julius Ardent is the official ruler, three main religious groups exert significant influence on the populace. The two most powerful are <strong>Jorvik’s Light</strong> and <strong>The Ardent Soul</strong>. A third, more minor faction, <strong>Petar’s Fall</strong>, also has a slight but notable influence.</p>
    </div>

    <div class="section">
      <h2>City Districts</h2>
      
      <h3>The Trade Ward</h3>
      <p>This is the chaotic, beating heart of Valdaris. It's built around the massive city gate that opens onto the <strong>Port Road</strong>—the Hundered-mile-long artery connecting Valdaris to its coastal port Jorvik’s Landing. All "port trade" is funneled through this gate, making this ward an "inland port." The air is thick with the smell of salt and fish from the coast, mixed with the shouts of merchants in the <strong>Onyx Bazaar</strong> and the clang of the warehouses. The powerful Merchant Guilds operate from here, controlling the flow of goods from the sea to the rest of the kingdom.</p>

      <h3>The Obsidian Rise</h3>
      <p>The imposing seat of political and military power, built on a defensible hill overlooking the Trade Ward and the Port Road. This entire district is crafted from the city's namesake black stone. Here, the <strong>Obsidian Citadel</strong> stands as a grim fortress, housing Governor Julius Ardent and the famed throne. The constant, rhythmic patrol of the Governor's Garrison on the stone streets is a reminder to all of who holds the true power in the city.</p>

      <h3>The Temple Rise</h3>
      <p>The spiritual soul of Valdaris, deliberately set on a separate hill apart from the commercial and military bustle. The air here is often heavy with incense and the sound of distant bells. The district is dominated by the <strong>Grand Temple</strong>, a massive, shared complex. It is split between the bright, open <strong>Hall of Light</strong> (for Jorvik’s Light) and the severe, dogmatic <strong>Sanctum of the Soul</strong> (for The Ardent Soul). Though outwardly serene, a palpable tension exists as the two major faiths watch each other with pious suspicion.</p>

      <h3>The White Lion Ward (The Forest's Edge)</h3>
      <p>This rustic, sprawling district is the "back" of Valdaris, where the city's edge blurs with the <strong>White Lion Woods</strong>. This is home to the common folk—trappers, woodcutters, hunters, and their families—who live in modest homes. The city's reputation as the "least fortified" capital is most evident here, where no great wall stands, only the looming, ancient forest. It's in the quiet groves and hidden alleys of this ward that the followers of <strong>Petar’s Fall</strong> worship, far from the grand temples on the rise.</p>
    </div>
    <div class="section">
      <h2>Key NPCs</h2>
      <div class="npc">
        <strong>Governor Julius Ardent</strong> — Second in line and absolute ruler of Valdaris. He governs in his fathers name but must balance his own power with the city's powerful religious factions.
      </div>
      <div class="npc">
        <strong>High Luminary Thara</strong> — The influential and charismatic leader of Jorvik's Light, a faith dedicated to the virtues and eventual return of the city's founder.
      </div>
      <div class="npc">
        <strong>First Speaker Malakai</strong> — The zealous leader of The Ardent Soul, a faith that interprets the Emperor's will with dogmatic fervor.
      </div>
    </div>


    <div class="section dm-screen">
      <h2>DM Screen (Secrets)</h2>
      <button id="dmButton">Show DM Notes</button>

      <div id="dmNotesContainer" style="display:none; background-color:#1a1a1d; border:1px solid gold; padding:15px; margin-top:10px; color:#E0D8B0;">
          <pre id="dmNotesContent" style="white-space: pre-wrap; font-family: 'Merriweather', serif;"></pre>
      </div>

      <div id="encryptedData" style="display:none;">U2FsdGVkX1+WsjNeNQOUrBeRdp1/1L+GwJ+1bA/aMR9QKOcU5S6COaCqy0IFRL5c</div>
    </div>


    <div class="section notes">
      <h2>Player Notes</h2>
      <textarea id="notes" placeholder="Write notes here..."></textarea>
      <button id="saveNotes">Save Notes</button>
    </div>

    <a href="../map/map.html" class="back-link">⬅ Back to Campaign Map</a>
  </div>

  <script>

    // START: ADD THIS DECRYPTION LOGIC
  const dmButton = document.getElementById('dmButton');

  dmButton.addEventListener('click', () => {
    const password = prompt('Enter DM Password:');
    if (!password) return;

    const encryptedText = document.getElementById('encryptedData').innerText;
    if (!encryptedText.trim()) {
        alert('No encrypted notes found on this page.');
        return;
    }

    try {
        // Try to decrypt
        const bytes = CryptoJS.AES.decrypt(encryptedText, password);
        const decryptedNotes = bytes.toString(CryptoJS.enc.Utf8);

        if (decryptedNotes) {
            // Success!
            document.getElementById('dmNotesContent').innerText = decryptedNotes;
            document.getElementById('dmNotesContainer').style.display = 'block';
            dmButton.style.display = 'none'; // Hide button
        } else {
            // Password was wrong, but didn't cause an error
            alert('Wrong Password!');
        }
    } catch (e) {
        // Password was definitely wrong and caused an error
        alert('Wrong Password!');
        console.error(e);
    }
  });
  // END: ADD THIS DECRYPTION LOGIC

    const notesKey = 'valdaris_notes';
    const textarea = document.getElementById('notes');
    const saveButton = document.getElementById('saveNotes');

    textarea.value = localStorage.getItem(notesKey) || '';

    saveButton.addEventListener('click', () => {
      localStorage.setItem(notesKey, textarea.value);
      alert('Notes saved!');
    });
  </script>
</body>
</html>